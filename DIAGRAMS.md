# ğŸ“ Visual Architecture Diagrams

## System Architecture (High-Level)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER DEVICE                          â”‚
â”‚                     (Browser - Any Device)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ HTTP/HTTPS
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NEXT.JS FRONTEND                          â”‚
â”‚              (Port 3000 - React + Tailwind)                  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Upload   â”‚  â”‚   Controls   â”‚  â”‚    Preview      â”‚    â”‚
â”‚  â”‚  Component â”‚  â”‚  (Duration,  â”‚  â”‚   & Download    â”‚    â”‚
â”‚  â”‚            â”‚  â”‚  Style, etc) â”‚  â”‚                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ REST API (JSON)
                 â”‚ POST /api/generate
                 â”‚ GET  /api/download/{id}
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FASTAPI BACKEND                            â”‚
â”‚               (Port 8000 - Python 3.11)                      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              API LAYER (routes.py)                   â”‚  â”‚
â”‚  â”‚  â€¢ Input Validation  â€¢ Error Handling  â€¢ Response   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           PROCESSING PIPELINE                        â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  1. Image Validation â”€â”€â–º 2. Edge Detection          â”‚  â”‚
â”‚  â”‚     (validators.py)       (sketch_engine.py)        â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  3. Stroke Ordering  â”€â”€â–º 4. Frame Generation        â”‚  â”‚
â”‚  â”‚     (sketch_engine.py)    (frame_generator.py)      â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  5. Hand Compositing â”€â”€â–º 6. Video Export            â”‚  â”‚
â”‚  â”‚     (frame_generator.py)  (video_exporter.py)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         TEMP FILE STORAGE (temp/)                    â”‚  â”‚
â”‚  â”‚  â€¢ Auto-cleanup after 1 hour                         â”‚  â”‚
â”‚  â”‚  â€¢ Isolated per job                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ Video File
                 â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  User   â”‚
            â”‚Downloadsâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Processing Pipeline (Detailed)

```
INPUT IMAGE
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                         â”‚
    â”‚  1. VALIDATION STAGE                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚  â”‚ â€¢ File type check           â”‚       â”‚
    â”‚  â”‚ â€¢ Size check (< 10MB)       â”‚       â”‚
    â”‚  â”‚ â€¢ Resolution (< 4K)         â”‚       â”‚
    â”‚  â”‚ â€¢ Base64 decode             â”‚       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚              â”‚                          â”‚
    â”‚              â”‚ Valid Image              â”‚
    â”‚              â–¼                          â”‚
    â”‚  2. EDGE DETECTION (OpenCV)             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚  â”‚ RGB â†’ Grayscale             â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Gaussian Blur (5x5)         â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Sobel Gradients             â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Non-Max Suppression         â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Double Threshold (50/150)   â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Binary Edge Map             â”‚       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚              â”‚                          â”‚
    â”‚              â”‚ Edge Map                 â”‚
    â”‚              â–¼                          â”‚
    â”‚  3. STROKE PATH EXTRACTION              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚  â”‚ Find Contours               â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Filter Noise (area < 10)    â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Sort by Position            â”‚       â”‚
    â”‚  â”‚  (topâ†’bottom, leftâ†’right)   â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Flatten to Points           â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Optional Downsample         â”‚       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚              â”‚                          â”‚
    â”‚              â”‚ Ordered Points (x,y)[]   â”‚
    â”‚              â–¼                          â”‚
    â”‚  4. FRAME GENERATION                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚  â”‚ Calculate:                  â”‚       â”‚
    â”‚  â”‚  frames = duration Ã— 30fps  â”‚       â”‚
    â”‚  â”‚  points_per_frame = ...     â”‚       â”‚
    â”‚  â”‚                             â”‚       â”‚
    â”‚  â”‚ For each frame:             â”‚       â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
    â”‚  â”‚  â”‚ 1. White canvas      â”‚  â”‚       â”‚
    â”‚  â”‚  â”‚ 2. Draw accumulated  â”‚  â”‚       â”‚
    â”‚  â”‚  â”‚    strokes (black)   â”‚  â”‚       â”‚
    â”‚  â”‚  â”‚ 3. Composite hand    â”‚  â”‚       â”‚
    â”‚  â”‚  â”‚    overlay (lagged)  â”‚  â”‚       â”‚
    â”‚  â”‚  â”‚ 4. Save frame        â”‚  â”‚       â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚              â”‚                          â”‚
    â”‚              â”‚ Frame Sequence           â”‚
    â”‚              â–¼                          â”‚
    â”‚  5. VIDEO EXPORT (FFmpeg)               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚  â”‚ Write frames as PNGs        â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Run FFmpeg:                 â”‚       â”‚
    â”‚  â”‚  â€¢ H.264 codec (MP4)        â”‚       â”‚
    â”‚  â”‚  â€¢ OR Optimized GIF         â”‚       â”‚
    â”‚  â”‚      â†“                       â”‚       â”‚
    â”‚  â”‚ Cleanup temp frames         â”‚       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚              â”‚                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
            OUTPUT VIDEO
         (MP4 or GIF file)
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚
â”‚   (Client)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Upload Image (Base64)
       â”‚    + Settings (duration, style)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Endpoint    â”‚
â”‚  /api/generate   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Validate Input
       â”‚    (size, type, format)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SketchEngine    â”‚
â”‚  .generate()     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Edge Map (numpy array)
       â”‚    + Original image
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SketchEngine    â”‚
â”‚  .extract_paths()â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Ordered Points [(x,y), ...]
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FrameGenerator   â”‚
â”‚ .generate()      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Frame List [img1, img2, ...]
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VideoExporter   â”‚
â”‚  .export_mp4()   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 6. Video File Path
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FileManager     â”‚
â”‚  .get_file()     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 7. Video URL
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Response    â”‚
â”‚  {video_url: ...}â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 8. Download Video
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser        â”‚
â”‚  (Video Player)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Interaction (Frontend)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   page.tsx (Main)                   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   State    â”‚   â”‚   Handlers   â”‚   â”‚  Logic  â”‚ â”‚
â”‚  â”‚ Management â”‚   â”‚              â”‚   â”‚         â”‚ â”‚
â”‚  â”‚            â”‚   â”‚              â”‚   â”‚         â”‚ â”‚
â”‚  â”‚ â€¢ image    â”‚   â”‚ â€¢ handleGen  â”‚   â”‚ â€¢ API   â”‚ â”‚
â”‚  â”‚ â€¢ duration â”‚   â”‚ â€¢ handleResetâ”‚   â”‚   calls â”‚ â”‚
â”‚  â”‚ â€¢ style    â”‚   â”‚              â”‚   â”‚         â”‚ â”‚
â”‚  â”‚ â€¢ videoUrl â”‚   â”‚              â”‚   â”‚         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                 â”‚                  â”‚     â”‚
â”‚         â–¼                 â–¼                  â–¼     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           Child Components                   â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ ImageUploader  â”‚  â”‚ DurationSlider  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                â”‚  â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ Props:         â”‚  â”‚ Props:          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ onUpload     â”‚  â”‚ â€¢ value         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ currentImage â”‚  â”‚ â€¢ onChange      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ HandSelector    â”‚ â”‚ GenerateButton  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚ â”‚                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ Props:          â”‚ â”‚ Props:          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ selected      â”‚ â”‚ â€¢ onClick       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ onSelect      â”‚ â”‚ â€¢ disabled      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚         PreviewArea                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ Props:                              â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ imageUrl                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ videoUrl                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ isGenerating                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ onReset                           â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ API calls via
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  api-client.ts   â”‚
              â”‚                  â”‚
              â”‚  â€¢ generateVideo â”‚
              â”‚  â€¢ checkHealth   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File System Structure (Runtime)

```
Project Root
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/                    â† Python source code
â”‚   â”‚   â”œâ”€â”€ main.py             â† FastAPI app
â”‚   â”‚   â”œâ”€â”€ api/                â† REST endpoints
â”‚   â”‚   â”œâ”€â”€ core/               â† Business logic
â”‚   â”‚   â””â”€â”€ utils/              â† Helper functions
â”‚   â”‚
â”‚   â”œâ”€â”€ temp/                   â† Generated files (auto-cleanup)
â”‚   â”‚   â”œâ”€â”€ abc123/             â† Job folder
â”‚   â”‚   â”‚   â”œâ”€â”€ frame_0001.png  â† Individual frames
â”‚   â”‚   â”‚   â”œâ”€â”€ frame_0002.png
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ abc123.mp4          â† Final video
â”‚   â”‚   â””â”€â”€ def456.mp4
â”‚   â”‚
â”‚   â”œâ”€â”€ .env                    â† Configuration (not in git)
â”‚   â””â”€â”€ requirements.txt        â† Dependencies
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ app/                    â† Next.js pages
â”‚   â”œâ”€â”€ components/             â† React components
â”‚   â”œâ”€â”€ lib/                    â† Utilities
â”‚   â”œâ”€â”€ .next/                  â† Build output (auto-generated)
â”‚   â”œâ”€â”€ .env.local              â† Configuration (not in git)
â”‚   â””â”€â”€ package.json            â† Dependencies
â”‚
â””â”€â”€ docker-compose.yml          â† Multi-container setup
```

---

## Request Lifecycle (Sequence Diagram)

```
User          Frontend       API Routes     Validators    SketchEngine   FrameGen    VideoExporter
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ Upload        â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ Image         â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ Click         â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ Generate      â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚ POST         â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚ /generate    â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Validate     â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Input        â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚ OK           â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Generate     â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Edges        â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚    Edge Map  â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Extract      â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Paths        â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚   Points[]   â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Generate     â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Frames       â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚  Frames[]   â”‚            â”‚
 â”‚                â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Export       â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚ Video        â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚ video.mp4  â”‚
 â”‚                â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚ Response     â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚ {video_url}  â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ Show          â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ Video         â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ Click         â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ Download      â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚ GET          â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚ /download/id â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚ Video        â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚ Stream       â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ Save          â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚ File          â”‚              â”‚              â”‚              â”‚              â”‚            â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
 â”‚                â”‚              â”‚              â”‚              â”‚             â”‚            â”‚
```

---

## Deployment Architecture (Production)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   CloudFlare    â”‚
                    â”‚   (CDN + DDoS)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Load Balancer  â”‚
                    â”‚   (nginx/ALB)   â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                             â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  Frontend (Ã—N)  â”‚         â”‚  Backend (Ã—N)    â”‚
     â”‚  Next.js        â”‚         â”‚  FastAPI         â”‚
     â”‚  (Stateless)    â”‚         â”‚  (Workers)       â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚               â”‚               â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                   â”‚   Redis    â”‚  â”‚  S3/GCS    â”‚  â”‚ Database â”‚
                   â”‚  (Queue)   â”‚  â”‚  (Videos)  â”‚  â”‚ (Future) â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

These visual diagrams help you understand:
- How components interact
- Data flow through the system
- Request/response lifecycle
- Production deployment topology

**Use these diagrams** when explaining the system to others or planning modifications!
